<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Emily01News</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #1e1b4b, #6d28d9, #db2777);
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(0,0,0,0.4);
    }
    header h1 {
      font-size: 18px;
    }
    .config-btn {
      cursor: pointer;
      font-size: 20px;
    }
    .hidden { display: none; }
    .post {
      background: rgba(255,255,255,0.1);
      margin: 15px;
      padding: 15px;
      border-radius: 12px;
    }
    .post h3 { margin-top: 0; }
    .btn {
      background: rgba(255,255,255,0.2);
      border: none;
      padding: 5px 10px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      margin-right: 5px;
    }
    .comments {
      margin-top: 10px;
      padding-left: 10px;
      border-left: 2px solid rgba(255,255,255,0.3);
    }
    .comment {
      margin-top: 5px;
      padding: 5px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
    }
    .dark {
      background: #0f0f0f;
      color: #f1f1f1;
    }
  </style>
</head>
<body>
  <header>
    <h1>Emily01News</h1>
    <div>
      <span id="darkToggle" class="btn">üåô</span>
      <span class="config-btn" id="configBtn">E</span>
    </div>
  </header>

  <!-- √Årea secreta de publicar -->
  <section id="publishSection" class="hidden" style="padding:15px;">
    <h3>Nova publica√ß√£o</h3>
    <textarea id="postContent" placeholder="Escreva algo..." style="width:100%;height:60px;"></textarea><br><br>
    <input type="file" id="mediaInput" accept="image/*,video/*"><br><br>
    <button class="btn" id="publishBtn">Publicar</button>
  </section>

  <!-- Publica√ß√µes -->
  <main id="feed">
    <div class="post" data-id="1">
      <h3>Emily01news</h3>
      <p></p>
      <div>
        <button class="btn likeBtn">‚ù§Ô∏è Curtir (<span class="likeCount">0</span>)</button>
        <button class="btn viewBtn"> Visualiza√ß√µes (<span class="viewCount">0</span>)</button>
        <button class="btn shareBtn">üì§ Compartilhar</button>
        <button class="btn commentToggle">üí¨ Coment√°rios</button>
      </div>
      <div class="comments hidden">
        <input type="text" class="commentInput" placeholder="Escreva um coment√°rio..."/>
        <button class="btn addComment">Comentar</button>
        <div class="commentList"></div>
      </div>
    </div>
  </main>

  <script>
    const PASSWORD = "1234";
    const configBtn = document.getElementById("configBtn");
    const publishSection = document.getElementById("publishSection");
    const publishBtn = document.getElementById("publishBtn");
    const feed = document.getElementById("feed");
    const darkToggle = document.getElementById("darkToggle");

    // Co(senha)
    configBtn.addEventListener("click", () => {
      const input = prompt("Digite a senha:");
      if(input === PASSWORD){
        publishSection.classList.remove("hidden");
        alert("√Årea de publica√ß√£o liberada ‚úÖ");
      } else {
        alert("Senha incorreta ‚ùå");
      }
    });

    // Publicar novo post
    publishBtn.addEventListener("click", () => {
      const content = document.getElementById("postContent").value;
      const mediaInput = document.getElementById("mediaInput");
      if(!content && !mediaInput.files.length) return;

      const postId = Date.now();
      const post = document.createElement("div");
      post.className = "post";
      post.dataset.id = postId;

      let mediaHTML = "";
      if(mediaInput.files.length){
        const file = mediaInput.files[0];
        if(file.type.startsWith("image")){
          mediaHTML = `<img src="${URL.createObjectURL(file)}" style="max-width:100%;border-radius:8px;margin-top:10px;">`;
        } else if(file.type.startsWith("video")){
          mediaHTML = `<video controls style="max-width:100%;border-radius:8px;margin-top:10px;"><source src="${URL.createObjectURL(file)}"></video>`;
        }
      }

      post.innerHTML = `
        <h3>Voc√™ publicou:</h3>
        <p>${content}</p>
        ${mediaHTML}
        <div>
          <button class="btn likeBtn">‚ù§Ô∏è Curtir (<span class="likeCount">0</span>)</button>
          <button class="btn viewBtn"> Visualiza√ß√µes (<span class="viewCount">0</span>)</button>
          <button class="btn shareBtn">üì§ Compartilhar</button>
          <button class="btn commentToggle">üí¨ Coment√°rios</button>
        </div>
        <div class="comments hidden">
          <input type="text" class="commentInput" placeholder="Escreva um coment√°rio..."/>
          <button class="btn addComment">Comentar</button>
          <div class="commentList"></div>
        </div>
      `;
      feed.prepend(post);
      attachPostEvents(post);
    });

    // Modo escuro
    darkToggle.addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });

    // Fun√ß√µes para interagir com posts
    function attachPostEvents(post){
      const likeBtn = post.querySelector(".likeBtn");
      const likeCount = post.querySelector(".likeCount");
      const viewBtn = post.querySelector(".viewBtn");
      const viewCount = post.querySelector(".viewCount");
      const shareBtn = post.querySelector(".shareBtn");
      const commentToggle = post.querySelector(".commentToggle");
      const commentsDiv = post.querySelector(".comments");
      const addCommentBtn = post.querySelector(".addComment");
      const commentInput = post.querySelector(".commentInput");
      const commentList = post.querySelector(".commentList");

      // Curtir
      let liked = false;
      likeBtn.addEventListener("click", () => {
        if(!liked){
          likeCount.textContent = parseInt(likeCount.textContent)+1;
          liked = true;
        } else {
          alert("Voc√™ j√° curtiu!");
        }
      });

      // Visualiza√ß√µes √∫nicas (simula√ß√£o)
      if(!localStorage.getItem("viewed_"+post.dataset.id)){
        viewCount.textContent = parseInt(viewCount.textContent)+1;
        localStorage.setItem("viewed_"+post.dataset.id,"true");
      }

      // Compartilhar
      shareBtn.addEventListener("click", () => {
        if(navigator.share){
          navigator.share({title:"Emily01News",text:"Veja esta publica√ß√£o!",url:window.location.href});
        } else {
          navigator.clipboard.writeText(window.location.href);
          alert("Link copiado!");
        }
      });

      // Mostrar/ocultar coment√°rios
      commentToggle.addEventListener("click", () => {
        commentsDiv.classList.toggle("hidden");
      });

      // Adicionar coment√°rio
      addCommentBtn.addEventListener("click", () => {
        const text = commentInput.value;
        if(!text) return;
        const c = document.createElement("div");
        c.className = "comment";
        c.innerHTML = `${text} <button class="btn small likeComment">üëç (<span>0</span>)</button>`;
        const likeCBtn = c.querySelector(".likeComment");
        const span = c.querySelector("span");
        let likedC = false;
        likeCBtn.addEventListener("click", () => {
          if(!likedC){
            span.textContent = parseInt(span.textContent)+1;
            likedC = true;
          } else {
            alert("Voc√™ j√° curtiu este coment√°rio!");
          }
        });
        commentList.appendChild(c);
        commentInput.value = "";
      });
    }

    // Ativar eventos para post inicial
    document.querySelectorAll(".post").forEach(p => attachPostEvents(p));

</script>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBjnSLKBdpz13_9jxlqwnQRNLXNtfPoq9o",
    authDomain: "emily01-ab49c.firebaseapp.com",
    projectId: "emily01-ab49c",
    storageBucket: "emily01-ab49c.firebasestorage.app",
    messagingSenderId: "955907136214",
    appId: "1:955907136214:web:516ea542ebb20e70f18777"
  };

  const app = initializeApp(firebaseConfig);
</script>

</body>
</html>
    
